# Automatically generated on 2022-03-29 UTC from https://codemagic.io/app/623dcfcc66f743a52a781cb7/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  default-workflow:
    name: Default Workflow
    max_build_duration: 60
    environment:
      vars:
        APP_STORE_CONNECT_ISSUER_ID: e3b8301b-020c-4453-88b6-d35d75e77dfc
        APP_STORE_CONNECT_KEY_IDENTIFIER: AYU44F9RTR
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmljV2xFMTVrMDB4MzFiWXhvblRkR0EwLUs4bXdBN3RZak04RVVnTXpaMmpPTmpDNTQzSGtBUGtBYW9qMW5pd1M2NFJnWVZpYWtwekMydDVsWUg2b1B0MUFETXNqajY0dUoyc2Z4TGt0XzFBckNITjFrWFI0WkRjR0lTNW5ldTIzZDU3UEgzaXBrZFJVSjgxRTJrd3F0SVoyMXljLW1XWDFXdVRLREllYW9wMnFmbzVtTXZmb3FvejUtdlF5Xy13YXd1MTd6ZkVuRm8xanplc1Z2d2xuMHRaQTQ1ejdMMUxfOS1ZOE9lWFFST0kzX3dVV0xUODFyOG5BVjhDU3E2YUNDejNLLVN3NUFLbzUzc1dNMlpmN2cxMFA4VndUekRDY2tWSUZrLWhDaFB2T1NmZ25YRGJYOFh5S29Xd2JGaV9DdHBralhVVThCeUpHTWktT2RmTFoyM2RkYy1Bdmx5VHBSdm1vY1Y5WS03eUxhZFJBb2NMRDI1ZF9DSVM5NDlRQlEtMHlfcG9INHl3cGlaQS1oM0xkQURUdkZsY0gwZ0hjVjQwa1I2aFYyaXVRMVRwST0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmljV2xFbWQxMlpCbEFvb0dmRFdvN3JLLUFGQ0NERGFuUkZPdGg1TlBZcUJwQ2hueW41RDJXeThxS3ZRZjNoYk1PNkJqUzdIQVViYXlqMEEzSEZMeFJrT2lVZFNzOGxHMlZyc3NaNXhZVW9POWNHQV9IZVd3WlpkNmlGZjc4UlJCcUJVX2Y2a2R6dUNwZEhkU0pkUkZiZlhONUZNa1ZCUFc0QnExLU40akQ3eFJwUGlTQXRDQnBKNzVSeE16MFBTcG54N0htTUtBTlVvbU5lN01Ic0prTTdfMDRzclB2YmJIMTZBZklIQXBOekRRX2hEZWh6X2FHVmFwemdRSmpFRzJRS2k1T1RleU03X3pRV3RoTDhlSm9lMGNPZEtCdmZtOHZtbThkQWdRUzBuZF8xVG5FQVphQnB6S0FOX1pLcmpMdmlDZVpMZHpvVkI2X0c5V0ZGUl9GRlA3WkR6MmVTb3lYc1otMUotdVc1Mk5reGNHaFZITE5PMkJ4dkFrU0JFbWtiUjkwU3RrSWVxY214dEVERUt6ZDlvRDl2Wmt2dG1LSWJCWnBmWkxyc1N0Z1JFN21PTXJ4RGZTSXF4RllLUW9lSnJjM0o0ZDZzMU55VnE5NEtBWktuaW5lTnpxeXNIZkVzZHl0bUtIUjQwRVE0N2ZTdjJETGxIVXJxZWk4RS13WG9NLVN4dFQ0aGVFc0pQTVBMeGxMbXJQaHdfaDFwNW9qUlZJcjZoZG03SFZDa2JGS1lOOUxlTFh4MWdrc3lOZThBV1B6czNvcW45Q1d2Q25yamtfZUZ4M0NFY3hxTFAzQ1M2NFctZlZDWTdsWXhVem5LT2szQVFFRklLbndpbUZiR0JISHNlanVoa1JNVndyT0dvemMwY3JYRUpmRW5RMzRSdngwYnM1bUZ6TnVpaGFzRVB2NEtabmdCdm1nSF82YkdvMUQ0bENWaGpsRVRENjZ2ZjhzblBFbGIwV0tNcm1FQ3Zfc2hQb2NrU1laRnRfVW9TdV9SVC13QXozS29lMXRTWkQ4c1BaX2EtbTJyalNYX3plRlVDYTJ3cGw2endZVm9tamxTMHZra2J1WEV2anRsZ09sVkFfaURZWi1ONU0takpadGRLeU5zTVhFUWZtRzZTdTVWQ0gtQXRZSTZWR054amRxZ28yd1kwWFVYcEdlTk51cWkyaFR2OHZpMktITGhoVEJFc0c4d0xfMmQyVjE2NXF4SzdUbF9kdUVuSXVPR24tV2cxLWxzRTBQcFR4alpfNjM0U1JUVm94emJrRGh4S0o5ZHpGWTZQTS1ZQVcxM2d5UlpsUWR3eklGbFJmaUE2Qy1oUE9UTFRwaklCWFM4ZlZqdkFScWplakpKXzhDU2lMZzh0U0VOTWVXTGxxTzdZVzNLS0cwVEhiNzVwdDFLQnh2WGwtZEUxZ0xmR2dhTDRwSWxLSHh4Zmg2Z0E3U1FGSXZUSGJHWlRxWEdtMWJ0RG0yUmdWcER3OGV4NWRRTEJnTnJDT0NZR2t2eEYwZ0NDbTAzR0hTVHJXd2dCcU9XeG4xNTZwRUtocVZnSlRxR19XX2FiSDItQ211T2I2WXVWUERKRmJVUDZ3VVdLR2p4NTB2cE12aFJYb0VQNEhTNTdIUmNPRVlRTFktMi14SFdiUE9vZGJsRmdNN196OTBJRk9ibjBEazdnRnNZT09aNGxTcHJDa1dYVzdUNVVpSkowdmo5Rmcyb1ZrdjN2cFlGcnVWTmlERjhTZzNYZVZhaUVKLWw2YnRTVWN1UlczMlJVM2Rubkx6eG5tb1FfRjlJeWtPcnRYN0Z2TE80b05MU25OdnJpTmJBMkJBeGMzMVFhMXVCZTVYOFJZVHZyMUpIanlOclFJTEtBUEwyT0dKdko3cDNPTi13NzJ2c3Q0Z1F2NU41WFJRMWFWc1lfMU95VXc3N2RnM0RSdHJ0ZG1yXzY4eDB3cW9JVFBUQ3IyUFlNYlpaRjlBd0cwQ0Iwb1pXVlFHckpOdk52Y0lPeHpLd1ZCTEY0ZUVuZDl2TERrUE9HaEJuQ3NNTmRkcVk4d094SUJ6dzhLaUZQN2hmQnBfbWRoaHJTLS1MLTVPT3owRWl2OFUwUTVwRjdCNTFHc21xVEpGazNjaVgyekVaXzhZamF2OUp6blRTbHdSZmlNeldWOUxEa1l5RVVmOS1lcGtYcTJlYXUzcXViZUIzSklCM1J0RWlHLTJ6VTQwb1JGb3VjaEhBZ1FkUlBzWllBQmVrLUxTYlJmTVpqWEVJbUlpRVhFSlp6bktkem95cFlVRTVUX0lZTW0wZERTeExLQnkyb0tLWFpyYlJJNndJMk05Tm9QSW9KbzV6SkNQQ3FuVkpsN2hMX3U4OHJkRFQ5ZkdndFRsYThMc1BKSkxkblpmOThhNHh3UkJFY0xLNThTQW00Mm1KMF9BS2UxbjRTXzBrdk40a3l2V01ubnBqcnA0dFZDQzNOY1Nwc3pUZm1yenREQ0trbkhGcGFhaFQ4ZDJWemFHQXpxaW9PM01BTy1Kc2tXbGlWZnhvUHFoNUJzS1FnUkx5Z2pNeldVSW1fQWwyc2lqRDBwczczSThkOWRiRWV6aEdDb09tRW9GR0NrRDUza0xiQTB5Q3JBZmZCNGItbVVEdk9zY1IwMjVPME1YSnB6Q2FFcHZhVHlzejNpNTZjSmVaWXJockkyV3phTWtDU0dsdFRTWHhnYVJNekVnUTlrcnJKQVhMb2hfd1pHTHo4eTdfRkhmOTR6OXpIYUhST0tjcmlZdXlPek1uQ2NzWEtVNmV0aXBJbFFLTDlnMkFrOGc5N2U3VlZqMmRnaFVoa3JoRVg5bW0tZXJPejVZZDBERENsaGxTSWVLemFSZmpwMFNJN3JreVBjejh1ckgxeTl5Q21CWHI4NWVobjlVa2s1UTBWOUdGSVE2elFvRWx2V2ZfSGhNWlBkVWQzTmtkMlV6UjhRUHpfNjJrV3N1LWNhUklWQy13S3VzcFNDaEpyTTY3NDVXLUtVb2lUSUdVR3FZaVpNUWMwRnBjUF9XRjRHX01VeUJiWmE2NzlzQ0lOUHNWQnVYYmdUZTE5UDlzQVdy)
      flutter: stable
      xcode: '13.1'
      cocoapods: default
    cache:
      cache_paths: []
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: '*'
          include: true
          source: true
      tag_patterns:
        - pattern: '*'
          include: true
    scripts:
      - |
        # set up debug keystore
        rm -f ~/.android/debug.keystore
        keytool -genkeypair \
          -alias androiddebugkey \
          -keypass android \
          -keystore ~/.android/debug.keystore \
          -storepass android \
          -dname 'CN=Android Debug,O=Android,C=US' \
          -keyalg 'RSA' \
          -keysize 2048 \
          -validity 10000
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/test_app/android/local.properties"
      - cd test_app && flutter packages pub get
      - cd test_app && flutter build apk --debug
      - find . -name "Podfile" -execdir pod install \;
      - keychain initialize
      - app-store-connect fetch-signing-files "mobile.myworkplace.net" --type IOS_APP_DEVELOPMENT
        --create
      - keychain add-certificates
      - xcode-project use-profiles
      - cd test_app && flutter build ipa --export-options-plist=$HOME/export_options.plist
    artifacts:
      - test_app/build/**/outputs/apk/**/*.apk
      - test_app/build/**/outputs/bundle/**/*.aab
      - test_app/build/**/outputs/**/mapping.txt
      - test_app/build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - test_app/*.snap
      - test_app/build/windows/**/*.msix
      - test_app/flutter_drive.log
    publishing:
      email:
        recipients:
          - brian.lovgren@myworkplace.net
