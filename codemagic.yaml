# Automatically generated on 2022-03-29 UTC from https://codemagic.io/app/623dcfcc66f743a52a781cb7/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  default-workflow:
    name: Default Workflow
    max_build_duration: 60
    environment:
      vars:
         APP_STORE_CONNECT_ISSUER_ID: e3b8301b-020c-4453-88b6-d35d75e77dfc
        APP_STORE_CONNECT_KEY_IDENTIFIER: AYU44F9RTR
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmlicHY5dVR0MmM0LXNYUUlQZ3pMdVRpeWRnOEVWNTctbnY4VEV3Y2h3S2JjUzFUX2pEVXA5MWt3THI1cGV1Tm5KNlBJc2pvcW1BWjJPZUtXQWcwb1VpSTY1d3BpeFdya01UX2tEVWsxalRMV05UXzgwMjB3U0x4ZUxLbm53T2hGZlN0Rm9tc0x6cXBjNWJnOHg2Zy1pLXdJVHBXWmNCNlpiWENsQ0s2TEpudUlrT3k2bFlrX3lsbHJWWjhMUlRZQ0Y4anBydXJ2aW02M2VfSDhidURTazBuOFNESkdrS3h1enJkOHdoM2dZUm1iU1pjNGlrLWhialZGcm8yRFdvNG9LaThrRkdycGZaLTRza0RaUzZFenlRdUgzeTF4TDJNdkJYT0VrUlJ0TVA3bVpPdjRWajJOYXBUX2I4dk1qcS1xOWpQQVNjc0ZIbFJxcko1WjJsVzhGMU5zaGUzbFAwM3JuWTJoSnZRWjVUWmVBeDAwd1VzbXFialB6SHNURmFhaE0tR05EbXVtZnNDalRFNS1TVmhSSFgtVWtCTlQyOHhVTzVJbEpyTkRyMy00aUI0TT0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmlicHY5ZV9mNmRFVzIxVklTU2twRDR4S3ZoMEFGNUUyZVZNU0k5WXA4eW5Sdng4VlRWZ0d2UzNQV2RKUXV0WjZmLWlOVGlhLVc0dks4Mlhqa0FsQzRsNmxrZEduNnpNTjI2cE9UZjRxRXd1bjNkdHdWQTg0aFlYdDFjQUdzMkdaTmZKRE55dURyY2I3dXptMnVFY1RiV2k4V05lLThnMldzSFJzS2J0eW5CWlFSNWpiVzB4T2dRUkhfNnNFcHhYQXVKcVlIZHZJbFp6emxDY2RsSkVDVjI4M3lRMlJmSDEwWWJ5eG10Uk5Xb0ZpdkZ5YzQ4VXpZaW53Qng4RXJCLTFjWnRrUWZDVGlCZnl4N0R1RDkzVDZsZ0J2THkta01wY2RSVE9kZDNfV2NoRVBQX1l4UHR4TEpZUnQxb0NfTTljNzNPanh0TzBxT0VzVFJSSG14NFJncTVhVHJNcWhyNUR2S2liTDdzejJDSkFUQXlqTERWOVFXUDhCakpPa1FaX2NpSUFXNnNuZWpDQjlncmdBZnlJVVlEbDVBWFVDLTk4bGdWU2NhRmFfak01UDNOdGhKaV9US2s5TDFvS050U0plaGljVEtHdW9ucnJMQU1SZVV0Vml2TzYtVEYxTVQwazBtbzhXSlZHWW0zd0VVMnNfMnItdWZmamFfdjBZX3BLUEpZY2lvenZLSDRreG5SbW1vNm16LXFsUmpUTXdUTlZfVndZRjNlOFBNXzFTVjZHREFxRVJ5Y0RmMkdMWmxNckY5a3B6aTJUdHBjTTNHY0RZSXlYRnRvalk3bnVxMGNwb0lMUHg1SzNwNFNyQTBhTnVyMUY3RUFfNW9TdnY2NGo4ZzJlYlB2aWd4czNKWUFmZ1NjZ1pBWW5RY3hGbEtrVmI0aFlyaVgxVkpZRUJpM2NOcHo4R2xmcnlGdWVnNnlLMTBOTXJpYUd4bkVzTHd3NzJpRTVENXNwWXNYWmNsRURHakloVF9talJtWVJfallQbmxsY0RlSVVtMDNyd0dvV2NjTS02UlUzTVRYbnk5YXRiMkFtNnVyQXlxMVdsQ195VFRGWUY5dVhPS1NNMjQzVTFSaU1BTFBKS0Z0UmYzbUxmRW1KMkNwbGt6YUNtRHl1TWRGalM1Tkl2ZG1McGU1QWI2dktHVXJnRUFxWmdheXdJTVRDY0FYdVRNMFZRZ2xiX29MZm1IcWVLdUNNaUdyQ3hZb2lqZ3hvTjZZTnJmRDZOMmpFZWMzN3VMSW5fLXBiQjd0bUJQZUdQX2U1eDA0dkxyTGlBeUF0Snd2NFdfdjJObmRNZGhnSXY3N0tvdXcwQjk4MUJ4ZGF3Q09oNnhGaERnVXRQN2RaS29LakpueXVvajVOOTdjN01EM01VMjdWNWUzbGJNY2U0Smxjb2Myd0l3VDVFY0xKYXBkT0cxc3lJbDdGTVJPOEZoVTRPa01BMWwwanVOakVYNHctSW1IWHpMN3lYTVU1Z2NrUnJvSkZYUnBoc0NpRHBhNmdCTzFFdXpSelFncGdteFYxdmN3enpObTlhX1g5WHVabW1YQkMzTUNuekl1N3JTbkJRZUxXLTRLRGZhVWlrb0N1RnRXYldKV1dxOHFoMlNFa1NlZ1FCdVdZUUtGV0lGZEZaTUZoUDFjVzFCd2NZQjZpaXdFbW50dzhmMmd0TTdPMDQzSTBsWWoxY1pjTWc1SEN3MVk3bTZPekRJMEZmWFpzN3YwcEpYQThVOVV1Yk85TUpzc2tpYnREWWRTSGxJcU1vaVFrQkJxelFLakhUMHlaZ0VDR1VzajVwSVZYbWd3WjFmUGREeF9MMzQxRVVPRFAzUGhyVWtZcVZrUWt6aWhqcW1QdVR1NVJuakFRa2I1a0JEQkZPbUs0aE9lTno0T2dTYUhJQ2pLeHFNNlpqMWpxSHNMdjhLNF96UmQwOHNENllnc2dEd042YlZaM1Q4dVprYXpHV1FXLVNPZ2k4YW9fVk1WNFVocVF1MHhidUE4WHJMNzdrZWZxcjljcmFOWFFjTkhLVWM1QVVlalNKaEI2Mk5faWd0d0luLTlHNU5MNlF5VFpzZWhaMU9Mb0lFeWhUdUpNTTd0STJBXzZ5bVUwZVpGbjFlYnJWWHQzYWpmUlVOUXZwQ1JOZ3U2eXFORGp4cGVMTzZfdmM2NkU0a2thNFNwMDlRUFFHSUZwcFBwYURIVFBveWxGQzFLMzltbWZQYU9lVGREbkN5Q1F2US1UMlprMU5QRkxQTzZ5U1FBbjA5YTF0LWg0Yk5KM3FHaUxuNTNGOWFkdjFUR0QzT0F5akYwTGhpY3kxdklTYzlCZGRtSzRMVUQtWE15cElwWkZaLUVYTVJ4Z2NnOXVRa0pWSFE0MUtxTWZ6X0l3anVORVQyR0RkSXYyVkJXMmkxWlo5dW82N2UtYl9XbXZKdWZicU9ETDVJMWx3SnFldHJRbXBTaGg3MnZEQ213cFllUVJ4MGNTOFpsbkhrNUNMZEtMbElXbWsxdEpJVFZmR0tLLXBiVVRUTGRnQmZLcmNwNnVtVEl5SU9jZktHQlR2ZnRJbjU3clhwLThLcjA1QThXSjlENnlKRkhEcm9GcHBRdDhUU0FsMXhxdURVc1ppTkdxUml4TURiODhzVUdiRWc4QjgzOW9OQU1VN3FhbjF5V2tlbkFZdHg2b1QyZ1JwT1E3MHI4ODFaZ2xsWkpzWm9BVTY4b3loZ2FSYWoyck1HczN1eWVqdUJocWtRemxUY29zbjAxRGxObXVmR1k2TGdfNWVtdE54OEFGVU9sRWtVTHRCLXpsdV81SDREMEUwQTNpa0NlWlgtVlJtUG8zb2h3N01BUUVBYmEtbFVObzk0QTFCRDVnS2ZBeFRkSWRqYjlzZjVMWUdTRmtoNXVxaVpiUlV2dTR6LUZyWXNoYTdqdTBXWjdnNzBhSjhJaEVJYXRRS1JIN2FUb0U3WUpFMHJWSHhHSUZVQldyM3g2c3NGM1hta1NXaVY2ZjBUU1VQTTJLbUdULVNLRjRzS3k3QzZVOEU5SUhfSjd1dDNKOUxid1ZBVThDdWh3My1pNUZmdDhVeVk1a3hpVEF3)
      flutter: stable
      xcode: '13.1'
      cocoapods: default
    cache:
      cache_paths: []
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: '*'
          include: true
          source: true
      tag_patterns:
        - pattern: '*'
          include: true
    scripts:
      - |
        # set up debug keystore
        rm -f ~/.android/debug.keystore
        keytool -genkeypair \
          -alias androiddebugkey \
          -keypass android \
          -keystore ~/.android/debug.keystore \
          -storepass android \
          -dname 'CN=Android Debug,O=Android,C=US' \
          -keyalg 'RSA' \
          -keysize 2048 \
          -validity 10000
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/test_app/android/local.properties"
      - cd test_app && flutter packages pub get
      - cd test_app && flutter build apk --debug
      - find . -name "Podfile" -execdir pod install \;
      - keychain initialize
      - app-store-connect fetch-signing-files "mobile.myworkplace.net" --type IOS_APP_DEVELOPMENT
        --create
      - keychain add-certificates
      - xcode-project use-profiles
      - cd test_app && flutter build ipa --export-options-plist=$HOME/export_options.plist
    artifacts:
      - test_app/build/**/outputs/apk/**/*.apk
      - test_app/build/**/outputs/bundle/**/*.aab
      - test_app/build/**/outputs/**/mapping.txt
      - test_app/build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - test_app/*.snap
      - test_app/build/windows/**/*.msix
      - test_app/flutter_drive.log
    publishing:
      email:
        recipients:
          - brian.lovgren@myworkplace.net
